#summary Objective-C Protocol Buffers for OSX and the iPhone

= Introduction =

Protocol Buffers are a way of encoding structured data in an efficient yet extensible format.  For more information see the main page [http://code.google.com/p/protobuf/ here].

This project contains a port of Protocol Buffers that can be used in OSX 10.5 and later and on the iPhone OS 2.0 and later.

The port includes a new Protocol Buffer compiler (protoc-objc) and a Protocol Buffer static library that you link into any project that you want protobuf support for.  The protoc-objc supports all the features of the protobuf 2 language and when given .proto files as input will generate the specialized Objective-C classes necessary to both read and write instances of the messages contained therein.  These classes, along with the supplied static library, will then allow your code to read and write protobuf instances simply and in a typesafe manner.

= Quick Example =

You write a .proto file like this:

{{{
message Person {
  required int32 id = 1;
  required string name = 2;
  optional string email = 3;
}
}}}

Then you compile it with protoc-objc, the protocol buffer compiler, to produce code in Objective-C.

You use that code like this to produce raw protobuf data from a message:

{{{
Person* person = [[[[[Person builder] setId:123] setName:@"Bob"] setEmail:@"bob@example.com] build];
NSData* data = [person data];
}}}

Or like this to read a message back from raw protobuf data:
{{{
NSData* raw_data = ...;
Person* person = [Person parseFromData:raw_data];
}}}

= Extensions =

In order to more seamlessly integrate with Objective-C code, this library also extends the standard google.protobuf.FileOptions message with the following options:

{{{
  // Sets the ObjectiveC package where classes generated from this .proto
  // will be placed.  This is typically used since Objective C libraries output
  // all their headers into a single directory.  i.e.  Foundation\*
  // AddressBook\*   UIKit\*   etc. etc.
  optional string objectivec_package = 1;
  
  // The string to be prefixed in front of all classes in order to make them
  // 'cocoa-y'.  i.e. 'NS/AB/CF/PB' for the
  // NextStep/AddressBook/CoreFoundation/ProtocolBuffer libraries respectively.
  // This will commonly be the capitalized letters from the above defined
  // 'objectivec_directory'
  optional string objectivec_class_prefix = 2;
}}}

By using these options, you can integrate existing protobuf definitions, while still producing Objective-C code that meets expected styling standards.  For example, this library uses those options above to emit the core protobuf Descriptor types into a "ProtocolBuffers" directory with a common "PB" prefix on all classes.  Thus, while you would say the following in java:

{{{import google.protobuf.Descriptor;}}}

in Objective-C you would say:

{{{import "ProtocolBuffers\PBDescriptor.h"}}}